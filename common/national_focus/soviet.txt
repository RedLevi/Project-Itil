focus_tree = {
	id = SOV_focus
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = SOV
		}
	}

	default = no
	
	focus = {
		id = SOV_industry_1
		icon = GFX_goal_generic_construct_infrastructure
		x = 4
		y = 0
		cost = 10
		bypass = {
			AND = {
				all_owned_state = {			
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}
				}
				all_owned_state = {			
					free_building_slots = {
						building = industrial_complex
						size < 1
						include_locked = yes
					}
				}
			}
		}
		
		complete_tooltip = {
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		
		completion_reward = {
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 3
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 3
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 0.5
				uses = 2
				category = industry
			}
		}
	}
	
	focus = {
		id = SOV_industry_2
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = SOV_industry_1 }
		x = 4
		y = 1
		cost = 10
		bypass = {
			AND = {
				all_owned_state = {			
					free_building_slots = {
						building = industrial_complex
						size < 1
						include_locked = yes
					}
				}
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}
				}
			}
		}
		
		complete_tooltip = {
		
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
			
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		
		completion_reward = {
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size < 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size < 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}			
	}
	
	focus = {
		id = SOV_civil_1
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SOV_industry_2 }
		x = 0
		y = 2
		cost = 10
		bypass = {
			all_owned_state = {
				free_building_slots = {
					building = industrial_complex
					size < 1
					include_locked = yes
				}
			}
		}
		
		complete_tooltip = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
			
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}
		
		completion_reward = {
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size < 0
					}
				}
			
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size < 1
					}
				}
			
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SOV_civil_2
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SOV_civil_1 }
		x = 0
		y = 3
		cost = 10
		bypass = {
			all_owned_state = {
				free_building_slots = {
					building = industrial_complex
					size < 1
					include_locked = yes
				}
			}
		}
		
		complete_tooltip = {
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = industrial_complex
				level = 3
				instant_build = yes
			}
			
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = industrial_complex
				level = 3
				instant_build = yes
			}
		}
		
		completion_reward = {
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size < 1
					}
				}
			
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size < 1
					}
				}
			
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SOV_infastructur_1
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = SOV_industry_2 }
		x = 4
		y = 2
		cost = 10
		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {			
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}

		complete_tooltip = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 1
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SOV_infastructur_2
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = SOV_infastructur_1 }
		x = 4
		y = 3
		cost = 10
		bypass = {
			AND = {
				all_owned_state = {
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
				all_owned_state = {
					free_building_slots = {
						building = industrial_complex
						size < 1
						include_locked = yes
					}
				}
			}
		}
		
		complete_tooltip = {
			add_building_construction = {
				type = infrastructure
				level = 3
				instant_build = yes
			}
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		
		completion_reward = {
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				
				add_building_construction = {
					type = infrastructure
					level = 3
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size < 1
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SOV_miltary_fact_1
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = SOV_industry_2 }
		prerequisite = { focus = SOV_consumers_1 }
		x = 8
		y = 2
		cost = 10
		bypass = {
			all_owned_state = {
				free_building_slots = {
					building = arms_factory
					size < 1
					include_locked = yes
				}
			}
		}
		
		complete_tooltip = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
			
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
		
		completion_reward = {
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size < 1
					}
				}
				
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size < 1
					}
				}
				
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			
			custom_effect_tooltip = SOV_defeat_upgrade

			hidden_effect = {
				if = {
					limit = {
						has_ideas = japan_defeat_soviet
					}
					remove_ideas = japan_defeat_soviet
					add_ideas = japan_defeat_soviet_2
				}
				
				if = {
					limit = {
						has_ideas = japan_defeat_soviet_3
					}
					remove_ideas = japan_defeat_soviet_3
					add_ideas = japan_defeat_soviet_4
				}
				
				if = {
					limit = {
						has_ideas = japan_defeat_soviet_5
					}
					remove_ideas = japan_defeat_soviet_5
					add_ideas = japan_defeat_soviet_6
				}
				
				if = {
					limit = {
						has_ideas = japan_defeat_soviet_7
					}
					remove_ideas = japan_defeat_soviet_7
					add_ideas = japan_defeat_soviet_8
				}
			}
		}
	}
	
	focus = {
		id = SOV_miltary_fact_2
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = SOV_miltary_fact_1 }
		x = 8
		y = 3
		cost = 10
		bypass = {
			all_owned_state = {
				free_building_slots = {
					building = arms_factory
					size < 1
					include_locked = yes
				}
			}
		}
		
		complete_tooltip = {
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = arms_factory
				level = 3
				instant_build = yes
			}
			
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = arms_factory
				level = 3
				instant_build = yes
			}
		}
		
		completion_reward = {
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size < 1
					}
				}
				
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size < 1
					}
				}
				
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SOV_oil
		icon = GFX_goal_generic_oil_refinery
		prerequisite = { focus = SOV_civil_1 }
		prerequisite = { focus = SOV_infastructur_1 }
		x = 2.5
		y = 3
		cost = 10
		
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		
		complete_tooltip = {
			if = {
				limit = { can_research = synth_oil_experiments = 1}
				set_technology = { synth_oil_experiments = 1 }	
				else = {
					add_tech_bonus = {
						name = CAN_polymer_corporation
						bonus = 0.5
						uses = 1
						category = synth_resources
					}
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = synthetic_refinery
						size < 1
						include_locked = yes
					}
				}
				
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = synthetic_refinery
						size < 1
						include_locked = yes
					}
				}
				
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
		}
		
		completion_reward = {
			if = {
				limit = {
					NOT = { has_tech = synth_oil_experiments }
				}
				set_technology = { synth_oil_experiments = 1 }
				effect_tooltip = {
					random_owned_controlled_state = {
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = synthetic_refinery
							level = 1
							instant_build = yes
						}
					}
					random_owned_controlled_state = {

						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = synthetic_refinery
							level = 1
							instant_build = yes
						}
					}
				}
				else = {
					add_tech_bonus = {
						name = SOV_refinery
						ahead_reduction = 1
						bonus = 0.5
						uses = 1
						category = synth_resources
					}
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = synthetic_refinery
						size > 0
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = synthetic_refinery
						size > 0
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SOV_military_production
		icon = GFX_goal_generic_production
		prerequisite = { focus = SOV_miltary_fact_1 }
		x = 6
		y = 3
		cost = 10
		
		completion_reward = {
			add_ideas = communist_production
		}
	}
	
	focus = {
		id = SOV_industry_3
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SOV_civil_2 }
		prerequisite = { focus = SOV_infastructur_2 }
		prerequisite = { focus = SOV_miltary_fact_2 }
		x = 4
		y = 4
		cost = 10
		bypass = {
			AND = {
				all_owned_state = {
					free_building_slots = {
						building = industrial_complex
						size < 1
						include_locked = yes
					}
				}
				all_owned_state = {
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}
				}
			}
		}
		
		complete_tooltip = {
			add_building_construction = {
				type = infrastructure
				level = 2
				instant_build = yes
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
		}
		
		completion_reward = {
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size < 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			
			random_owned_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size < 1
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SOV_sience_1
		icon = GFX_focus_research
		prerequisite = { focus = SOV_industry_3 }
		x = 4
		y = 5
		cost = 10
		
		completion_reward = {
			add_research_slot = 1
		}
	}
	
	focus = {
		id = SOV_nuke
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = SOV_industry_3 }
		x = 2
		y = 5
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				name = secret_bonus
				bonus = 0.5
				uses = 2
				category = nuclear
			}
		}
	}
	
	focus = {
		id = SOV_consumers_1
		icon = GFX_goal_generic_consumer_goods
		x = 8
		y = 0
		cost = 10
		
		completion_reward = {
			add_ideas = consume_of_workers
		}
		
	}
	
	focus = {
		id = SOV_consumers_2
		icon = GFX_goal_generic_consumer_goods
		prerequisite = { focus = SOV_civil_2 }
		x = 0
		y = 5
		cost = 10
		
		completion_reward = {
			custom_effect_tooltip = SOV_defeat_upgrade

			hidden_effect = {
				if = {
					limit = {
						has_ideas = japan_defeat_soviet
					}
					remove_ideas = japan_defeat_soviet
					add_ideas = japan_defeat_soviet_3
				}
				
				if = {
					limit = {
						has_ideas = japan_defeat_soviet_2
					}
					remove_ideas = japan_defeat_soviet_2
					add_ideas = japan_defeat_soviet_4
				}
				
				if = {
					limit = {
						has_ideas = japan_defeat_soviet_5
					}
					remove_ideas = japan_defeat_soviet_5
					add_ideas = japan_defeat_soviet_7
				}
				
				if = {
					limit = {
						has_ideas = japan_defeat_soviet_6
					}
					remove_ideas = japan_defeat_soviet_6
					add_ideas = japan_defeat_soviet_8
				}
			}
		}
	}
	
	focus = {
		id = SOV_army_reform
		icon = GFX_goal_generic_army_effort
		x = 16
		y = 0
		cost = 10
		
		completion_reward = {
			custom_effect_tooltip = SOV_defeat_upgrade

			hidden_effect = {
				if = {
					limit = {
						has_ideas = japan_defeat_soviet
					}
					remove_ideas = japan_defeat_soviet
					add_ideas = japan_defeat_soviet_5
				}
				
				if = {
					limit = {
						has_ideas = japan_defeat_soviet_2
					}
					remove_ideas = japan_defeat_soviet_2
					add_ideas = japan_defeat_soviet_6
				}
				
				if = {
					limit = {
						has_ideas = japan_defeat_soviet_3
					}
					remove_ideas = japan_defeat_soviet_3
					add_ideas = japan_defeat_soviet_7
				}
				
				if = {
					limit = {
						has_ideas = japan_defeat_soviet_4
					}
					remove_ideas = japan_defeat_soviet_4
					add_ideas = japan_defeat_soviet_8
				}
			}
		}
		
	}
	
	focus = {
		id = SOV_modernize_infant
		icon = GFX_goal_generic_small_arms
		prerequisite = { focus = SOV_army_reform }
		x = 16
		y = 1
		cost = 10
		
		completion_reward = {
			add_tech_bonus = {
				name = small_arms_bonus
				bonus = 0.5
				uses = 3
				category = infantry_weapons
			}
		}
	}
	
	