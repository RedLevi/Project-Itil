########################################
# Yugoslavian Focus Tree - By HappyNTH #
########################################

focus_tree = {
	id = yug_focus

	country = {
		factor = 0

		modifier = {
			add = 10
			tag = YUG
		}
	}

	### Question of Ethnicities ###

	focus = {
		id = YUG_ethnic_question
		icon = GFX_goal_generic_attack_allies
		x = 4
		y = 0
		cost = 10
		ai_will_do = {
			factor = 10
		}
		available_if_capitulated = no

		completion_reward = {
			add_political_power = 100
		}

	}

	## Puppeting Section ##

	focus = {
		id = YUG_enhanced_freedoms
		icon = GFX_goal_generic_national_unity
		x = 1
		y = 1
		cost = 10
		ai_will_do = {
			factor = 10
		}
		available_if_capitulated = no
		prerequisite = {
			focus = YUG_ethnic_question
		}
		completion_reward = {
			swap_ideas = { remove_idea = YUG_dc add_idea = YUG_dc_free }
			set_country_flag = YUG_enhanced_freedoms
		}
		mutually_exclusive = {
			focus = YUG_ethnic_int
			focus = YUG_serbian_dom
		}
	}

	focus = {
		id = YUG_puppet_borders
		icon = GFX_focus_generic_self_management
		x = 1
		y = 2
		cost = 10
		ai_will_do = {
			factor = 10
		}
		available_if_capitulated = no
		available = {
			NOT = { has_war = yes }
			AND = {
				owns_state = 109 # Croatia
				owns_state = 103 # Dalmatia
				owns_state = 163 # Zara
				owns_state = 105 # Montenegro
				# 44 Albania
			}
		}
		prerequisite = {
			focus = YUG_enhanced_freedoms
		}
		completion_reward = {
			release_puppet = CRO
			release_puppet = MNT
		}
	}

	focus = {
		id = YUG_bosnian_question
		icon = GFX_focus_generic_self_management
		x = 1
		y = 3
		cost = 10
		ai_will_do = {
			factor = 10
		}
		available_if_capitulated = no
		available = {
			NOT = { has_war = yes }
			owns_state = 104 # Bosnia
		}
		prerequisite = {
			focus = YUG_puppet_borders
		}
		completion_reward = {
			country_event = { days = 1 id = yug.1 }
		}
	}

	## Freedom / Integration Shared Tree ##

	focus = {
		id = YUG_rural_inf
		icon = GFX_goal_generic_construct_infrastructure
		x = 3
		y = 2
		cost = 10
		ai_will_do = {
			factor = 9
		}
		available_if_capitulated = no
		available = {
			AND = {
				owns_puppet_103 = yes
				owns_puppet_163 = yes
				owns_puppet_44 = yes
			}
		}
		prerequisite = {
			focus = YUG_enhanced_freedoms
			focus = YUG_ethnic_int
		}
		completion_reward = {
			103 = {
				add_building_construction = { type = infrastructure level = 2 instant_build = yes }
				add_extra_state_shared_building_slots = 1
			}
			163 = {
				add_building_construction = { type = infrastructure level = 2 instant_build = yes }
				add_extra_state_shared_building_slots = 1
			}
			44 = {
				add_building_construction = { type = infrastructure level = 2 instant_build = yes }
				add_extra_state_shared_building_slots = 1
			}
		}
	}

	focus = {
		id = YUG_capital_rail
		icon = GFX_goal_generic_construct_infrastructure
		x = 3
		y = 3
		cost = 10
		ai_will_do = {
			factor = 9
		}
		available_if_capitulated = no
		available = {
			AND = {
				owns_puppet_109 = yes
				owns_puppet_105 = yes
				owns_puppet_104 = yes
			}
		}
		prerequisite = {
			focus = YUG_rural_inf
		}
		completion_reward = {
			109 = {
				add_building_construction = { type = infrastructure level = 2 instant_build = yes }
				add_extra_state_shared_building_slots = 2
			}
			105 = {
				add_building_construction = { type = infrastructure level = 2 instant_build = yes }
				add_extra_state_shared_building_slots = 2
			}
			104 = {
				add_building_construction = { type = infrastructure level = 2 instant_build = yes }
				add_extra_state_shared_building_slots = 2
			}
		}
	}

	focus = {
		id = YUG_croat_goods
		icon = GFX_goal_generic_construct_mil_factory
		x = 1
		y = 4
		cost = 10
		ai_will_do = {
			factor = 9
		}
		available_if_capitulated = no
		available = {
			AND = {
				owns_puppet_109 = yes
				owns_puppet_103 = yes
			}
		}
		prerequisite = {
			focus = YUG_capital_rail
		}
		completion_reward = {
			109 = {
				add_building_construction = { type = arms_factory level = 1 instant_build = yes }
				add_building_construction = { type = industrial_complex level = 1 instant_build = yes }
				add_extra_state_shared_building_slots = 2
			}
			103 = {
				add_building_construction = { type = industrial_complex level = 1 instant_build = yes }
				add_extra_state_shared_building_slots = 1
			}
		}
	}

	focus = {
		id = YUG_alb_goods
		icon = GFX_goal_generic_construct_civ_factory
		x = 3
		y = 4
		cost = 10
		ai_will_do = {
			factor = 9
		}
		available_if_capitulated = no
		availible = {
			owns_state = 44
		}
		prerequisite = {
			focus = YUG_capital_rail
		}
		completion_reward = {
			if = {
				limit = {
					has_country_flag = YUG_enhanced_freedoms
				}
				release_puppet = ALB
				add_political_power = 40
			}
			if = {
				limit = {
					has_country_flag = YUG_ethnic_integration
				}
				#country_event = { id = yug.? days = 1 }
			}
			if = {
				limit = {
					NOT = {
						OR = {
							has_country_flag = YUG_ethnic_integration
							has_country_flag = YUG_enhanced_freedoms
						}
					}
				}
				custom_effect_tooltip = albania_factories
			}
		}
	}

	## Ethnic Integration ##

	focus = {
		id = YUG_ethnic_int
		icon = GFX_focus_generic_diplomatic_treaty
		x = 5
		y = 1
		cost = 10
		ai_will_do = {
			factor = 10
		}
		available_if_capitulated = no
		prerequisite = {
			focus = YUG_ethnic_question
		}
		mutually_exclusive = {
			focus = YUG_enhanced_freedoms
			focus = YUG_serbian_dom
		}
		completion_reward = {
			swap_ideas = { remove_idea = YUG_dc add_idea = YUG_dc_int }
			set_country_flag = YUG_ethnic_integration
		}
	}

	## Serbian Dominance ##

	focus = {
		id = YUG_serbian_dom
		icon = GFX_focus_rom_royal_dictatorship
		x = 7
		y = 1
		cost = 10
		ai_will_do = {
			factor = 10
		}
		available_if_capitulated = no
		prerequisite = {
			focus = YUG_ethnic_question
		}
		mutually_exclusive = {
			focus = YUG_enhanced_freedoms
			focus = YUG_ethnic_int
		}
		completion_reward = {
			swap_ideas = { remove_idea = YUG_dc add_idea = YUG_dc_dom }
			set_country_flag = YUG_serbian_dominance
		}
	}
}